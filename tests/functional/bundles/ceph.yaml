series: bionic
machines:
  '0':
    constraints: cores=1 mem=2G root-disk=20G
  '1':
    constraints: cores=1 mem=2G root-disk=20G
  '2':
    constraints: cores=1 mem=2G root-disk=20G
applications:
  ceph-mon:
    charm: cs:~openstack-charmers-next/ceph-mon
    num_units: 3
    options:
      expected-osd-count: 3
      monitor-count: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
  ceph-osd:
    charm: cs:~openstack-charmers-next/ceph-osd
    num_units: 3
    options:
      osd-devices: /dev/loop0
    storage:
      # NOTE (rgildein): The use of a 1.8G size storage device will ensure that it is
      # not safe to reboot/shutdown two ceph-osd units.
      osd-devices: loop,1.8G
    to:
      - 0
      - 1
      - 2
relations:
- - ceph-osd:mon
  - ceph-mon:osd
